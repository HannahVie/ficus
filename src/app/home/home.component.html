<!-- HERO -->
<section class="destaque">
  <div class="destaque-overlay"></div>

  <div class="container">
    <div class="destaque-content">
      <h1>
        Reforma que valoriza.<br />
        Fachada que <span>IMPRESSIONA.</span>
      </h1>

      <div class="destaque-botoes">
        <a routerLink="/contato" class="btn btn-outline">Solicitar orçamento</a>
        <a [routerLink]="['/']" fragment="contato" class="btn btn-outline">Falar com a Ficus</a>
      </div>
    </div>
  </div>
</section>

<section class="secao-o-que-fazemos" id="servicos">
  <div class="o-que-fazemos-container">
    <header class="o-que-fazemos-cabecalho">
      <h2>O que fazemos</h2>
      <p>Soluções <strong>completas</strong> em reformas e fachadas</p>
    </header>

    <div class="o-que-fazemos-linha o-que-fazemos-tabs">
      <div class="o-que-fazemos-tabs-list" role="tablist" aria-label="Serviços">
        @for (servico of servicos; track servico.id) {
        <button
          class="o-que-fazemos-tab"
          type="button"
          role="tab"
          [class.is-active]="servico.id === servicoAtivoId"
          [attr.aria-selected]="servico.id === servicoAtivoId"
          (click)="setServicoAtivo(servico.id)"
        >
          <span class="o-que-fazemos-tab-icone" aria-hidden="true">
            <img [src]="servico.icon" alt="" />
          </span>
          <span class="o-que-fazemos-tab-titulo">{{ servico.title }}</span>
        </button>
        }
      </div>

      @if (getServicoAtivo(); as servico) {
      <article class="o-que-fazemos-tabs-panel" role="tabpanel">
        <span class="o-que-fazemos-panel-icone" aria-hidden="true">
          <img [src]="servico.icon" alt="" />
        </span>
        <h3 class="o-que-fazemos-panel-titulo">{{ servico.title }}</h3>
        <p class="o-que-fazemos-panel-texto">{{ servico.description }}</p>
      </article>
      }
    </div>

    <div class="o-que-fazemos-accordion" aria-label="Serviços">
      @for (servico of servicos; track servico.id) {
      <div class="o-que-fazemos-accordion-item">
        <button
          class="o-que-fazemos-accordion-header"
          type="button"
          [class.is-active]="servico.id === servicoAtivoId"
          (click)="setServicoAtivo(servico.id)"
        >
          <span class="o-que-fazemos-accordion-icone" aria-hidden="true">
            <img [src]="servico.icon" alt="" />
          </span>
          <span class="o-que-fazemos-accordion-titulo">{{ servico.title }}</span>
        </button>
        <div class="o-que-fazemos-accordion-panel" [class.is-open]="servico.id === servicoAtivoId">
          <p>{{ servico.description }}</p>
        </div>
      </div>
      }
    </div>

    <p class="o-que-fazemos-nota">
      Cada etapa é planejada e executada com rigor técnico para garantir
      segurança, durabilidade e estética.
    </p>
    <div class="o-que-fazemos-cta-wrap">
      <a class="o-que-fazemos-cta" routerLink="/servicos">Conhecer todos os serviços</a>
    </div>
  </div>
</section>

<section class="secao-como-trabalhamos" id="metodo">
  <div class="como-trabalhamos-container">
    <header class="como-trabalhamos-cabecalho">
      <h2>Como trabalhamos</h2>
      <p>Engenharia aplicada com ética, método e clareza</p>
    </header>

    <div class="como-trabalhamos-grade">
      <article class="como-trabalhamos-card" style="--bg:url('/assets/images/sunlight-colonnade.jpg')">
        <div class="como-trabalhamos-overlay"></div>
        <h3>Planejamento técnico detalhado</h3>
      </article>

      <article class="como-trabalhamos-card" style="--bg:url('/assets/images/low-angle-view-man-building.jpg')">
        <div class="como-trabalhamos-overlay"></div>
        <h3>Métodos padronizados e execução consistente</h3>
      </article>

      <article class="como-trabalhamos-card" style="--bg:url('/assets/images/light-falling-wooden-abstract-design.jpg')">
        <div class="como-trabalhamos-overlay"></div>
        <h3>Materiais adequados para cada solução</h3>
      </article>

      <article class="como-trabalhamos-card" style="--bg:url('/assets/images/light-magic.jpg')">
        <div class="como-trabalhamos-overlay"></div>
        <h3>Comunicação transparente em todas as etapas</h3>
      </article>
    </div>

    <p class="como-trabalhamos-nota">
      Compromisso, qualidade e segurança conduzem cada decisão.
    </p>
  </div>
</section>

<!-- PARA QUEM FAZEMOS -->
<section class="audience" id="quem-somos">
  <div class="audience-container">
    <div class="audience-card">
      <div class="audience-image">
        <img src="/assets/images/silhouette-person-city.jpg" alt="Projeto pensado para condomínios e administradoras" />
      </div>

      <div class="audience-text">
        <h2>Para quem fazemos</h2>
        <p>
          Projetos pensados para condomínios,<br />
          administradoras e gestores que<br />
          exigem precisão e previsibilidade.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- CONTATO / FALE COM UM ESPECIALISTA -->
<section class="contact" id="contato">
  <div class="contact-container">
    <div class="contact-card">

      <div class="contact-left">
        <h2>Fale com um <br />especialista</h2>
        <p>
          Atendimento direto,<br />
          respostas rápidas e<br />
          orientação técnica desde<br />
          o primeiro contato.
        </p>

        <div class="contact-icons" aria-label="Canais de contato">
          <a [href]="contato.whatsappHref" target="_blank" aria-label="WhatsApp" class="contact-icon">
            <img src="/assets/icons/whatsapp.svg" alt="" />
          </a>
          <a [href]="contato.telHref" target="_blank" aria-label="Telefone" class="contact-icon">
            <img src="/assets/icons/phone-call.svg" alt="" />
          </a>
          <a [href]="contato.mailtoHref" target="_blank" aria-label="E-mail" class="contact-icon">
            <img src="/assets/icons/email.svg" alt="" />
          </a>
        </div>
      </div>

      <form class="contact-form" #contactForm="ngForm" (ngSubmit)="onContactSubmit(contactForm)" novalidate>
        <label class="field">
          <span>Nome</span>
          <input type="text" name="nome" [(ngModel)]="nome" required minlength="3" pattern="^[A-Za-zÀ-ÖØ-öø-ÿ' -]+$"
            (ngModelChange)="onNameInput($event, nomeModel)" (blur)="nomeModel.control.markAsTouched()"
            autocomplete="name" #nomeModel="ngModel" />
          @if (nomeModel.invalid && nomeModel.touched) {
          <span class="field-hint">Informe um nome válido (apenas letras).</span>
          }
        </label>

        <label class="field">
          <span>E-mail</span>
          <input type="email" name="email" [(ngModel)]="email" required
            pattern="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+[.][A-Za-z]{2,}$" (blur)="emailModel.control.markAsTouched()"
            autocomplete="email" #emailModel="ngModel" />
          @if (emailModel.invalid && emailModel.touched) {
          <span class="field-hint">Informe um e-mail válido.</span>
          }
        </label>

        <label class="field">
          <span>Telefone</span>
          <input type="tel" name="telefone" [(ngModel)]="telefone" required inputmode="tel" maxlength="15"
            pattern="[(]?[0-9]{2}[)]? ?[0-9]{4,5}-?[0-9]{4}" (ngModelChange)="onPhoneInput($event, telefoneModel)"
            (blur)="telefoneModel.control.markAsTouched()" autocomplete="tel" #telefoneModel="ngModel" />
          @if (telefoneModel.invalid && telefoneModel.touched) {
          <span class="field-hint">Informe um telefone válido.</span>
          }
        </label>

        <label class="contact-full field">
          <span>Mensagem</span>
          <textarea name="mensagem" rows="4" [(ngModel)]="mensagem" required minlength="10"
            (blur)="mensagemModel.control.markAsTouched()" #mensagemModel="ngModel"></textarea>
          @if (mensagemModel.invalid && mensagemModel.touched) {
          <span class="field-hint">Mensagem muito curta.</span>
          }
        </label>

        <div class="contact-actions">
          <button type="submit" class="contact-btn" [disabled]="contactForm.invalid || enviandoContato">{{ enviandoContato ? "Enviando..." : "Enviar" }}</button>
        </div>

      </form>

    </div>
  </div>
</section>

<app-modal-alerta
  [aberto]="modalAlertaAberto"
  [titulo]="modalAlertaTitulo"
  [mensagem]="modalAlertaMensagem"
  (fechado)="modalAlertaAberto = false"
></app-modal-alerta>
